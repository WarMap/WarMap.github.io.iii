<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Block series 简介]]></title>
      <url>http://warmap.me/2015/12/24/Block-series-%E7%AE%80%E4%BB%8B/</url>
      <content type="html"><![CDATA[<h1 id="u7B80_u4ECB"><a href="#u7B80_u4ECB" class="headerlink" title="简介"></a>简介</h1><p>官方介绍镇楼（本文主要参考和翻译官方文档）</p>
<p><code>Block objects are a C-level syntactic and runtime feature. They are similar to standard C functions, but in addition to executable code they may also contain variable bindings to automatic (stack) or managed (heap) memory. A block can therefore maintain a set of state (data) that it can use to impact behavior when executed.</code><br>Block 是C语言级的语法并有运行时特性。它和C语言的标准函数很相似，但是在有可执行的代码基础上它还有可能将变量保存到栈或者堆上。因此Block持有了一组“状态值”来确保执行的结果</p>
<p><code>You can use blocks to compose function expressions that can be passed to API, optionally stored, and used by multiple threads. Blocks are particularly useful as a callback because the block carries both the code to be executed on callback and the data needed during that execution.</code><br>你可以用blocks来组织一段具有某种功能的代码段，而且可以传递给API、选择性存储、多线程使用。Blocks作为回调尤其的好使，因为block携带了回调需要执行的代码和执行时所需的数据（参数）。</p>
<h1 id="Getting_Started_with_Blocks"><a href="#Getting_Started_with_Blocks" class="headerlink" title="Getting Started with Blocks"></a>Getting Started with Blocks</h1><h3 id="Declaring_and_Using_a_Block"><a href="#Declaring_and_Using_a_Block" class="headerlink" title="Declaring and Using a Block"></a>Declaring and Using a Block</h3><p>You use the <strong>^</strong> operator to declare a block variable and to indicate the beginning of a block literal. The body of the block itself is contained within {}, as shown in this example (as usual with C, ; indicates the end of the statement):<br><img src="http://ww4.sinaimg.cn/large/77178728gw1ezbonewlmxj20fg06cmy4.jpg" alt=""><br>Notice that the block is able to make use of variables from the same scope in which it was defined.<br><strong>注意</strong>：block能使用在其被定义的scope内的变量</p>
<p>If you declare a block as a variable, you can then use it just as you would a function:<br>如果你声明block为一个变量，你可以像调用一个函数一样调用它</p>
<pre><code>int multiplier = 7;
int (^myBlock)(int) = ^(int num) {
    return num * multiplier;
};
printf(&quot;%d&quot;, myBlock(3));
// prints &quot;21&quot;`
</code></pre><h3 id="Using_a_Block_Directly"><a href="#Using_a_Block_Directly" class="headerlink" title="Using a Block Directly"></a>Using a Block Directly</h3><p>In many cases, you don’t need to declare block variables; instead you simply write a block literal inline where it’s required as an argument. The following example uses the qsort_b function. qsort_b is similar to the standard qsort_r function, but takes a block as its final argument.<br>在很多情况下啊，你并不需要声明一个block变量。而是当一个参数，这时只需写出block的实现即可。下面给出例子，qsort_b函数，和qsort_r函数相似，但是需要block作为最后一个参数</p>
<pre><code>char *myCharacters[3] = { &quot;TomJohn&quot;, &quot;George&quot;, &quot;Charles Condomine&quot; };

qsort_b(myCharacters, 3, sizeof(char *), ^(const void *l, const void *r) {
    char *left = *(char **)l;
     char *right = *(char **)r;
     return strncmp(left, right, 1);
});

// myCharacters is now { &quot;Charles Condomine&quot;, &quot;George&quot;, &quot;TomJohn&quot; }
</code></pre><h3 id="Blocks_with_Cocoa"><a href="#Blocks_with_Cocoa" class="headerlink" title="Blocks with Cocoa"></a>Blocks with Cocoa</h3><p>Several methods in the Cocoa frameworks take a block as an argument, typically either to perform an operation on a collection of objects, or to use as a callback after an operation has finished. The following example shows how to use a block with the NSArray method sortedArrayUsingComparator:. The method takes a single argument—the block. For illustration, in this case the block is defined as an NSComparator local variable:<br>有一些Cocoa frameworks的方法接收block做一个参数，典型的应用如：在集合中元素的操作或一个操作完成后的回调。下面的例子展示了NSArray的方法sortedArrayUsingComparator:中如何使用的block。这个方法接收了一个单参数的block。说明一下，这里block定义为一个NSComparator类型的本地变量</p>
<pre><code>NSArray *stringsArray = @[ @&quot;string 1&quot;,
                           @&quot;String 21&quot;,
                           @&quot;string 12&quot;,
                           @&quot;String 11&quot;,
                           @&quot;String 02&quot; ];
static NSStringCompareOptions comparisonOptions = NSCaseInsensitiveSearch | NSNumericSearch | NSWidthInsensitiveSearch | NSForcedOrderingSearch;
NSLocale *currentLocale = [NSLocale currentLocale];

NSComparator finderSortBlock = ^(id string1, id string2) {

NSRange string1Range = NSMakeRange(0, [string1 length]);
return [string1 compare:string2 options:comparisonOptions range:string1Range locale:currentLocale];
};

NSArray *finderSortArray = [stringsArray sortedArrayUsingComparator:finderSortBlock];
NSLog(@&quot;finderSortArray: %@&quot;, finderSortArray);

/*
Output:
finderSortArray: (
    &quot;string 1&quot;,
    &quot;String 02&quot;,
    &quot;String 11&quot;,
    &quot;string 12&quot;,
    &quot;String 21&quot;
)
*/
</code></pre><h3 id="block_Variables"><a href="#block_Variables" class="headerlink" title="__block Variables"></a>__block Variables</h3><p>A powerful feature of blocks is that they can modify variables in the same lexical scope. You signal that a block can modify a variable using the __block storage type modifier. Adapting the example shown in Blocks with Cocoa, you could use a block variable to count how many strings are compared as equal as shown in the following example. For illustration, in this case the block is used directly and uses currentLocale as a read-only variable within the block:</p>
<p>blocks有一个强大的特性，它能修改在同一词法范围内的变量值。block可以修改通过__block存储类型修饰符修饰的变量。改动一下上面的🌰，你可以使用一个block变量来统计下面这个🌰中有多字符串是相同的。说明一下，这里是直接使用的block并在block中用了currentLocale变量（只读）。</p>
<pre><code>NSArray *stringsArray = @[ @&quot;string 1&quot;,
                          @&quot;String 21&quot;, // &lt;-
                          @&quot;string 12&quot;,
                          @&quot;String 11&quot;,
                          @&quot;Strîng 21&quot;, // &lt;-
                          @&quot;Striñg 21&quot;, // &lt;-
                          @&quot;String 02&quot; ];

NSLocale *currentLocale = [NSLocale currentLocale];
__block NSUInteger orderedSameCount = 0;

NSArray *diacriticInsensitiveSortArray = [stringsArray sortedArrayUsingComparator:^(id string1, id string2) {

NSRange string1Range = NSMakeRange(0, [string1 length]);
NSComparisonResult comparisonResult = [string1 compare:string2 options:NSDiacriticInsensitiveSearch range:string1Range locale:currentLocale];

if (comparisonResult == NSOrderedSame) {
    orderedSameCount++;
}
return comparisonResult;
}];

NSLog(@&quot;diacriticInsensitiveSortArray: %@&quot;, diacriticInsensitiveSortArray);
NSLog(@&quot;orderedSameCount: %d&quot;, orderedSameCount);

/*
Output:

diacriticInsensitiveSortArray: (
    &quot;String 02&quot;,
    &quot;string 1&quot;,
    &quot;String 11&quot;,
    &quot;string 12&quot;,
    &quot;String 21&quot;,
       &quot;Str\U00eeng 21&quot;,
    &quot;Stri\U00f1g 21&quot;
)
orderedSameCount: 2
*/
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[va_list OC不定参数函数的实现]]></title>
      <url>http://warmap.me/2015/12/22/va-list-OC%E4%B8%8D%E5%AE%9A%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      <content type="html"><![CDATA[<h1 id="u4ECB_u7ECD"><a href="#u4ECB_u7ECD" class="headerlink" title="介绍"></a>介绍</h1><p>官方文档是最好的学习资料，我们先看看系统中我们常用的不定参数函数</p>
<pre><code>void NSLog ( NSString *format, ... );

- (instancetype)initWithFormat:(NSString *)format, ...

- (instancetype)initWithTitle:(NSString *)title
                 delegate:(id&lt;UIActionSheetDelegate&gt;)delegate
        cancelButtonTitle:(NSString *)cancelButtonTitle
   destructiveButtonTitle:(NSString *)destructiveButtonTitle
        otherButtonTitles:(NSString *)otherButtonTitles, ...
</code></pre><p>不定参数函数的参数数量是可变动的，它使用省略号来忽略之后的参数。需要注意的是:<strong>不定参数函数最少要有一个命名的参数</strong>,不然你就会收到如下错误提示,但在C++，则没有这种强制要求。 （虽然在C++中，这样的声明是合理的，但是这种写法，因为没有已命名的参数，使得va_start没办法抓到动态参数的正确起始点。）</p>
<p><img src="http://ww4.sinaimg.cn/large/77178728gw1ez87f3xxeej208u00m3yh.jpg" alt=""></p>
<h1 id="u539F_u6599"><a href="#u539F_u6599" class="headerlink" title="原料"></a>原料</h1><table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:left">描述</th>
<th style="text-align:center">兼容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">va_list</td>
<td style="text-align:left">用来保存宏va_arg与宏va_end所需信息</td>
<td style="text-align:center">C89</td>
</tr>
<tr>
<td style="text-align:center">va_start</td>
<td style="text-align:left">使va_list指向起始的参数</td>
<td style="text-align:center">C89</td>
</tr>
<tr>
<td style="text-align:center">va_arg</td>
<td style="text-align:left">检索参数</td>
<td style="text-align:center">C89</td>
</tr>
<tr>
<td style="text-align:center">va_end</td>
<td style="text-align:left">释放va_list</td>
<td style="text-align:center">C89</td>
</tr>
<tr>
<td style="text-align:center">va_copy</td>
<td style="text-align:left">拷贝va_list的内容</td>
<td style="text-align:center">C99</td>
</tr>
</tbody>
</table>
<h1 id="u5F00_u5DE5"><a href="#u5F00_u5DE5" class="headerlink" title="开工"></a>开工</h1><p>先定义一个“人”类</p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@interface Person : NSObject</span><br><span class="line"></span><br><span class="line">- (void)eatAllKindsOfFood:(NSString *)food1 food2:(NSString *)food2 ,...;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation Person</span><br><span class="line"></span><br><span class="line">- (void)eatAllKindsOfFood:(NSString *)food1 food2:(NSString *)food2, ... &#123;</span><br><span class="line">   	NSString *str;</span><br><span class="line">   	NSLog(@<span class="string">"吃%@"</span>,food1);</span><br><span class="line">   	va_list v1;</span><br><span class="line">  		str = food2;</span><br><span class="line">   	va_start(v1,food2);</span><br><span class="line">   	<span class="keyword">do</span></span><br><span class="line">   	&#123;</span><br><span class="line">           NSLog(@<span class="string">"吃%@"</span>,str);</span><br><span class="line">           str=va_arg(v1,NSString*);</span><br><span class="line">   	&#125; <span class="keyword">while</span> (str != NULL );</span><br><span class="line">   	va_end(v1);</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line">Person *p = [[Person alloc] init];</span><br><span class="line">   [p eatAllKindsOfFood:@<span class="string">"饺子"</span> food2:@<span class="string">"火锅"</span>, @<span class="string">"烧烤"</span>, @<span class="string">"面条"</span>, nil];</span><br></pre></td></tr></table></figure>
</code></pre><p>输出结果：</p>
<p><img src="http://ww1.sinaimg.cn/large/77178728gw1ez8anm3hd6j20df03fdgh.jpg" alt=""></p>
<p>##剖析<br>原型： void va_start(va_list arg_ptr,prev_param)<br>功能： prev_param为最后一个固定参数，<strong>函数参数列表中参数在内存中的顺序与函数声明时的顺序是一致的。</strong>这里对应的就是参数food2.va_start根据prev_param的地址起点来确定不定参数的内存起始地址，然后赋值给arg_ptr。</p>
<p>原型：type va_arg(va_list arg_ptr,type);<br>功能：获取下一个变参的地址。arg_ptr即为当前要取出变参的地址，type为要取出变参的类型（决定返回值的类型）得到这个变参后，将arg_ptr指向下一个变参</p>
<p>原型：void  va_end(va_list arg_ptr);<br>功能：将va_list指针释放</p>
<p>参考：</p>
<p><a href="https://zh.wikipedia.org/wiki/Stdarg.h" target="_blank" rel="external">https://zh.wikipedia.org/wiki/Stdarg.h</a><br><a href="http://www.cnblogs.com/wangyonghui/archive/2010/07/12/1776068.html" target="_blank" rel="external">http://www.cnblogs.com/wangyonghui/archive/2010/07/12/1776068.html</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac下使用Hexo－github搭建个人博客]]></title>
      <url>http://warmap.me/2015/12/15/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo%EF%BC%8Dgithub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      <content type="html"><![CDATA[<h2 id="u524D_u8A00"><a href="#u524D_u8A00" class="headerlink" title="前言"></a>前言</h2><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;先前查资料或问题总能进到他人的blog，心里很是长草。周末决定自己也搞一个,本来做好了万难的准备（以为要自己写界面干啥干啥的，最后还要申请个域名、空间什么的，balabala）后来发现了Hexo和github的组合,简直容易到爆啊，对了做到容易到爆当然少不了homebrew这等神器。好下面开始。对了忘了告诉大家，这篇博文只是写下来留个记录的，如果你也想通过hexo搭建属于自己的blog请移步到<a href="https://hexo.io/" target="_blank" rel="external">hexo官网</a></p>
<h2 id="u5F00_u641E"><a href="#u5F00_u641E" class="headerlink" title="开搞"></a>开搞</h2><h3 id="what_do_we_need_uFF1F"><a href="#what_do_we_need_uFF1F" class="headerlink" title="what do we need？"></a>what do we need？</h3><ul>
<li>homebrew （从此安装只需一句话）</li>
<li>nodejs（hexo基于nodejs）</li>
<li>hexo</li>
<li>git（提交部署github）</li>
<li>github账号</li>
</ul>
<h3 id="how_to_do_it"><a href="#how_to_do_it" class="headerlink" title="how to do it"></a>how to do it</h3><h4 id="u5B89_u88C5"><a href="#u5B89_u88C5" class="headerlink" title="安装"></a>安装</h4><ol>
<li><p>安装Homebrew（一句话） <a href="http://brew.sh/" target="_blank" rel="external">官网</a></p>
<pre><code>ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
</code></pre></li>
<li><p>安装nodejs（又是一句话）</p>
<pre><code>brew install node
</code></pre></li>
<li><p>安装hexo（又是三句话）（咦，总感觉哪里不对）</p>
<pre><code>npm install -g hexo
hexo init
npm install
</code></pre></li>
<li><p>安装git（还是一句话，就是这个feel倍爽）</p>
<pre><code>sudo brew install git
</code></pre></li>
</ol>
<h4 id="u914D_u7F6E"><a href="#u914D_u7F6E" class="headerlink" title="配置"></a>配置</h4><ol>
<li><p>生成SSH keys(<a href="https://help.github.com/articles/generating-ssh-keys/" target="_blank" rel="external">Generating SSH keys</a>)</p>
<p> SSH keys均在用户根目录下.ssh文件夹中保存，会存在之前已经存在key的情况，下面分开讨论</p>
<ul>
<li><p>没有key的情况（一路回车在~/.ssh目录下得到id_rsa和id_rsa.pub两个文件）</p>
<pre><code>ssh-keygen -t rsa -C &quot;注册github的邮箱”
</code></pre></li>
<li><p>有key的情况（生成key并制定key的名字）</p>
<pre><code>ssh-keygen -t rsa -f ~/.ssh/key的名字 -C &quot;注册github的邮箱&quot;
</code></pre></li>
</ul>
</li>
<li><p>添加key到ssh-agent</p>
<pre><code>ssh-add ~/.ssh/id_rsa
</code></pre></li>
<li>注册github帐号</li>
<li><p>添加key到github</p>
<ul>
<li>打开github，在右上角点击你的头像，然后点击<strong>setting</strong><br><img src="http://ww3.sinaimg.cn/large/77178728gw1ez1b3kttpsj20an0fjaag.jpg" alt=""></li>
<li>设置的侧边栏点击<strong>SSH keys</strong><br><img src="http://ww3.sinaimg.cn/large/77178728gw1ez1bqaseboj20gk0963yu.jpg" alt=""></li>
<li>点击<strong>Add SSH key</strong><br><img src="http://ww1.sinaimg.cn/large/77178728gw1ez1bt2nqlyj20gk02mwek.jpg" alt=""></li>
<li>title随便写，把你的key粘贴到下面。然后点击<strong>Add key</strong><br><img src="http://ww4.sinaimg.cn/large/77178728gw1ez1bu4p4gqj20gn09oq3y.jpg" alt=""></li>
<li><p>检查是否关联成功</p>
<pre><code>ssh -T git@github.com
</code></pre></li>
</ul>
</li>
<li><p>hexo关联github</p>
<p>修改hexo根目录下_config.yml文件（xxxx为你的github账户名称）</p>
<pre><code>deploy:
  type: github
  repo: git@github.com:xxxx/xxxx.github.io.git
  branch: master
</code></pre></li>
<li><p>见证奇迹的时刻！</p>
<pre><code>hexo d -g
</code></pre></li>
</ol>
<h3 id="finish"><a href="#finish" class="headerlink" title="finish"></a>finish</h3>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>http://warmap.me/2015/12/13/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start"><a href="#Quick_Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create_a_new_post"><a href="#Create_a_new_post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server"><a href="#Run_server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files"><a href="#Generate_static_files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites"><a href="#Deploy_to_remote_sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    </entry>
    
  
  
</search>
